%%
%% Paul Landes  2018-05-06
%

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{zenacro}[5/06/2018 Acronyms]

\usepackage{acro}
\acsetup{first-long-format=\itshape,hyperref=false,tooltip=true,index=true,page-style=plain,pages=first}
% add index entries for each acro
\usepackage{makeidx}
% uppercase first letter or each word command
\usepackage{mfirstuc}
% hyperlink URLs
\usepackage{zenhref}
% \zzsecaddtoc
\usepackage{zensec}

%% acronym commands

% define an acronym
% first-style = default | empty | square | short | long | reversed | footnote | sidenote | footnote-reversed|sidenote-reversed
% ex: \zzdefnamedclassacro[long]{nlp}{NLP}{natural language processing}{abbrev}
\newcommand{\zzdefnamedclassacro}[7][default]{%
\DeclareAcronym{#2}{
  short=#3,
  long=#4,
  first-style=#1,
  class=#5,
  short-indefinite=#6,
  long-indefinite=#7
}}

% expand acro name into several commands with cap and plural forms:
% \<name>, \<names> (plural), \<namecap> (capital), \<namescap> (plural capital)
\newcommand{\zzexpandacrocmd}[3]{%
\expandafter\newcommand\csname #1\endcsname{\ac{#1}}%
\expandafter\newcommand\csname #1s\endcsname{\acp{#1}}%
\expandafter\newcommand\csname #1capw\endcsname{\capitalisewords{#3}}%
\expandafter\newcommand\csname #1cap\endcsname{\Acl{#1}}%
\expandafter\newcommand\csname #1scap\endcsname{\Aclp{#1}}}

% ex: \zzdefnamedacro[long]{nlp}{NLP}{natural language processing}
%     creates command \nlp
\newcommand{\zzdefnamedacro}[4][default]{%
\zzdefnamedclassacro[#1]{#2}{#3}{{#4}}{abbrev}{a}{a}
\expandafter\newcommand\csname #2\endcsname{\ac{#2}}}

% create the acronym and commands with cap and plural forms:
% \<name>, \<names> (plural), \<namecap> (capital), \<namescap> (plural capital)
\newcommand{\zzdefexpandclassacro}[7][default]{%
\zzdefnamedclassacro[#1]{#2}{#3}{{#4}}{#5}{#6}{#7}%
\zzexpandacrocmd{#2}{#3}{#4}}

% define an expanded acronym with cap and plural forms (see \zzdefexpandclassacro)
% ex: \zzdefexpandacro{tfidf}{TF/IDF}{term frequency/inverse document frequency}
\newcommand{\zzdefexpandacro}[4][default]{%
\zzdefexpandclassacro[#1]{#2}{#3}{#4}{abbrev}{a}{a}}

% define a named term (first occurrence is italic) with cap and plural forms
% (see \zzdefexpandclassacro)
% ex: \zzdefacro{dl}{deep learning}
\newcommand{\zzdefacro}[2]{%
\zzdefexpandclassacro[long]{#1}{#2}{#2}{term}{a}{a}}

% define a term (first occurrence is italic)
% ex: \zzdefacroterm{corpus}
\newcommand{\zzdefacroterm}[1]{%
\zzdefexpandclassacro[long]{#1}{#1}{#1}{term}{a}{a}}

% define a definition
% ex: \zzdefdef{role}{role}{proponent vs.\@ opponent}
%\zzdefexpandclassacro{#1}{#2}{#3}{def}{a}{a}
\newcommand{\zzdefdef}[3]{%
\DeclareAcronym{#1}{
  short=#2,
  long=#3,
  first-long-format=\normalfont,
  class=def
}%
\zzexpandacrocmd{#1}{#2}{#3}}

% define an URL as a hyperlink in a footnote
% first-style = default | empty | square | short | long | reversed | footnote | sidenote | footnote-reversed|sidenote-reversed
% ex: \zzdefurlacro{idebatecorp}{idebate corpus}{https://idebate.org/debatabase}
%     creates command \idebatecorp
\newcommand{\zzdefurlacro}[3]{%
\DeclareAcronym{#1}{
  short=#2,
  long=\zzhref{#3},
  short-format=\normalfont,
  long-format=\normalfont,
  first-long-format=\normalfont,
  first-style=footnote,
  class=url
}%
\expandafter\newcommand\csname #1\endcsname{\ac{#1}}}

% print class of acros (not for client use)
\newcommand{\zzprintclass}[5]{%
  \zzsecaddtoc{#1}{#3}{acro:#1}{false}%
  \printacronyms[include-classes=#2, name=#3]}

% print the abbreviations list and add toc entry
\newcommand{\zzprintabbrevs}[1][section]{\zzprintclass{#1}{abbrev}{Abbreviations}}

% print the definitions list and add toc entry
\newcommand{\zzprintdefs}[1][section]{\zzprintclass{#1}{def}{Definitions}}

% print the definitions list and add toc entry
\newcommand{\zzprintindex}[1][section]{
  \zzsecaddtoc{#1}{Index}{spec:index}{false}%
  \printindex}
